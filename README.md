# 升级版：本影/半影 + 过境表（纯前端）

在“最小模板”的基础上，增加：
- **地影精确几何（本影/半影圆锥）**：基于太阳距地距离 D 与太阳半径，计算 x 轴向距离下的圆锥半径；分类为 *阳照 / 半影 / 本影*。
- **过境表（未来 12 小时）**：扫描仰角曲线，找到上升/下降穿越地平线的区间，统计**最高仰角**与当时是否阳照。

> 仍为纯前端静态站点（CesiumJS + satellite.js + SunCalc），手机可用、可 PWA 安装。

## 使用
1. 点击 **定位**（授权）。
2. 选择卫星或粘贴 TLE。
3. 如需，调整**仰角阈值**，点击 **刷新过境表**。

## 过境表字段
- **开始 / 结束**：本地时间（浏览器时区）。
- **最高仰角**：该次过境的峰值仰角。
- **是否阳照**：峰值时段是否处于阳照（若为“可能半影/本影”，观测亮度可能较低或不可见）。

## 地影模型说明（简要）
- 设地球半径 Rₑ、太阳半径 Rₛ、日地距 D：
  - 本影长度 L = Rₑ·D / (Rₛ − Rₑ)
  - 半影扩展尺度 Lₚ = Rₑ·D / (Rₛ + Rₑ)
  - 当卫星在反太阳方向、距地心轴向距离 x>0 时：
    - 本影半径 rᵤ(x) = Rₑ·(1 − x/L)，x ≤ L 时为正，否则趋零
    - 半影半径 rₚ(x) = Rₑ·(1 + x/Lₚ)
- 将卫星 ECI 位置分解为轴向（与太阳反向）与径向分量，若径向 < rᵤ → **本影**；径向 < rₚ → **半影**；否则 **阳照**。

> 过境表的“是否阳照”取**峰值仰角时刻**的判定，用于快速判断“是否易见”。

## 部署
沿用“最小模板”的部署方法：
- **Netlify Drop**：手机直接丢 ZIP。
- **GitHub Pages**：新建仓库，上传全部文件，Settings→Pages 选择分支发布。
- **Cloudflare Pages**：Direct upload。

## 文件
- `index.html`：入口 + UI
- `app.js`：核心逻辑（圆锥地影 + 过境表）
- `style.css`：手机样式 + 表格
- `manifest.json` / `sw.js` / `icons/`：PWA

> 注意：计算开销与步长相关。默认 30s 步长扫描未来 12 小时，适合手机。需要更细可以把 `predictPasses(..., step=10)`。